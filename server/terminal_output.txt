âœ… Google Gemini 2.0 Flash initialized successfully
ğŸ“Š Loaded 3 detailed Postman APIs for darwinbox
Server running on port 5000
ğŸ“š Loaded examples for: apis_used, assumptions, dependencies, error_handling, integration_description_and_overview, purpose_justification, technical_content_or_specification
ğŸ¨ Graphviz initialized successfully
ğŸ” [REQ-1748270375870-3btnhh] Starting /api/generate-brd request
Transformed outputs: [
  { name: 'Purpose/Justification', types: [ 'content' ] },
  {
    name: 'Integration Description and Overview',
    types: [ 'content' ]
  },
  { name: 'Technical Design Specifications', types: [ 'content' ] },
  { name: 'Assumptions', types: [ 'content' ] },
  { name: 'Dependencies', types: [ 'content' ] },
  { name: 'APIs Used', types: [ 'table', 'content' ] },
  { name: 'Test Cases', types: [ 'content' ] },
  { name: 'Data Flow Diagram', types: [ 'image', 'content' ] }
]
=== Structured BRD Data ===
ğŸ“Š Request Summary: {
  template: 'Attendance Inbound Integration',
  client: 'Shopper Stop',
  outputsCount: 8,
  hasBusinessLogic: true,
  sessionId: '14cad1d3-e72f-424a-b4ac-e674b7c43fb5'
}
ğŸ” [REQ-1748270375870-3btnhh] Calling generateBRD with sessionId: 14cad1d3-e72f-424a-b4ac-e674b7c43fb5
ğŸ¤– Generating BRD with AI...
Input data structure: {
  hasTemplate: true,
  hasFormData: true,
  hasBusinessUseCase: true,
  hasBusinessLogic: true,
  hasOutputs: true,
  hasTechnicalData: true,
  hasFiles: false
}
ğŸš€ Starting AI BRD Generation...
ğŸ“Š Input Summary: {
  template: 'Attendance Inbound Integration',
  client: 'Shopper Stop',
  outputsCount: 8,
  hasBusinessLogic: true,
  sessionId: '14cad1d3-e72f-424a-b4ac-e674b7c43fb5'
}
ğŸ“‹ Context built: {
  mode: 'API-Based',
  direction: 'INBOUND',
  integrationPattern: 'API-Based_INBOUND',
  hasApiDocs: false
}
ğŸ”„ Generating: Purpose/Justification
ğŸ”„ API call attempt 1/5
ğŸ¤– Generating text content for: Purpose/Justification
âœ… API call successful on attempt 1
âœ… Text content generated for Purpose/Justification (553 chars)
ğŸ”„ Generating: Integration Description and Overview
â³ Waiting 1999ms for rate limit...
ğŸ”„ API call attempt 1/5
ğŸ¤– Generating text content for: Integration Description and Overview
âœ… API call successful on attempt 1
âœ… Text content generated for Integration Description and Overview (776 chars)
ğŸ”„ Generating: Technical Design Specifications
â³ Waiting 2000ms for rate limit...
ğŸ”„ API call attempt 1/5
ğŸ¤– Generating text content for: Technical Design Specifications
âœ… API call successful on attempt 1
âœ… Text content generated for Technical Design Specifications (2900 chars)
ğŸ”„ Generating: Assumptions
â³ Waiting 2000ms for rate limit...
ğŸ”„ API call attempt 1/5
ğŸ¤– Generating text content for: Assumptions
âœ… API call successful on attempt 1
âœ… Text content generated for Assumptions (1086 chars)
ğŸ”„ Generating: Dependencies
â³ Waiting 1999ms for rate limit...
ğŸ”„ API call attempt 1/5
ğŸ¤– Generating text content for: Dependencies
âœ… API call successful on attempt 1
âœ… Text content generated for Dependencies (812 chars)
ğŸ”„ Generating: APIs Used
ğŸ”„ Generating: Test Cases
â³ Waiting 1999ms for rate limit...
ğŸ”„ API call attempt 1/5
ğŸ¤– Generating text content for: Test Cases
âœ… API call successful on attempt 1
âœ… Text content generated for Test Cases (5101 chars)
ğŸ”„ Generating: Data Flow Diagram
â³ Waiting 1999ms for rate limit...
ğŸ”„ API call attempt 1/5
ğŸ¨ Generating diagram for: Data Flow Diagram
âœ… API call successful on attempt 1
âœ… Diagram generated for Data Flow Diagram
âœ… BRD Generation Complete
âœ… AI BRD Generation Successful
ğŸ“„ Publishing to Confluence using global config...
ğŸ“„ Creating Confluence BRD page with bulletproof architecture... (attempt 1/5)
ğŸ” Generated Page ID: BRD-ShopperStop-cabc1b50 (Session: kpd9k)
ğŸ·ï¸ Page Identifier: BRD-ShopperStop-cabc1b50
ğŸ”’ Acquiring distributed lock for: BRD-ShopperStop-cabc1b50
ğŸ”’ Attempting to acquire lock for: BRD-ShopperStop-cabc1b50
ğŸ”— Confluence API Request: POST /content
ğŸ¨ Graphviz initialized successfully
âœ… Confluence API Response: 200 OK
âœ… Lock acquired for: BRD-ShopperStop-cabc1b50
âœ… Lock acquired: 1748270414004-0.8218128879901381
ğŸ” Performing comprehensive duplicate check...
ğŸ” Performing comprehensive duplicate check...
ğŸ“‹ Generated Page Title: TS-250526-qnklj8-cp89 Shopper Stop ::  - Integration BRD...
ğŸ”— Confluence API Request: GET /content/search
âœ… Confluence API Response: 200 OK
ğŸ” Level 3 - Recent pages check...
ğŸ”— Confluence API Request: GET /content/search
âœ… Confluence API Response: 200 OK
âœ… No duplicates found - safe to create new page
ğŸ“‹ Generated Page Title: TS-250526-gndctx-8la2 Shopper Stop ::  - Integration BRD...
ğŸ“‹ Unique Page Title: TS-250526-gndctx-8la2 Shopper Stop ::  - Integration BRD
ğŸ” Final safety check - exact title search...
ğŸ”— Confluence API Request: GET /content/search
âœ… Confluence API Response: 200 OK
ğŸ“„ Creating new page (no duplicates found)
ğŸ“„ Creating new Confluence page safely...
ğŸ” Debug generateSmartContentSections - Available sections: [
  'Purpose/Justification',
  'Integration Description and Overview',
  'Technical Design Specifications',
  'Assumptions',
  'Dependencies',
  'APIs Used',
  'Test Cases',
  'Data Flow Diagram'
]
ğŸ“ Processing section: Purpose/Justification (type: object)
ğŸ“ Processing section: Purpose/Justification (type: object)
ğŸ¯ Detected content type for Purpose/Justification: text
ğŸ¤– Processing: Purpose/Justification (type: text)
ğŸ“ Processing section: Integration Description and Overview (type: object)
ğŸ“ Processing section: Integration Description and Overview (type: object)
ğŸ¯ Detected content type for Integration Description and Overview: text
ğŸ¤– Processing: Integration Description and Overview (type: text)
ğŸ“ Processing section: Technical Design Specifications (type: object)
ğŸ“ Processing section: Technical Design Specifications (type: object)
ğŸ¯ Detected content type for Technical Design Specifications: text
ğŸ¤– Processing: Technical Design Specifications (type: text)
ğŸ“ Processing section: Assumptions (type: object)
ğŸ“ Processing section: Assumptions (type: object)
ğŸ¯ Detected content type for Assumptions: text
ğŸ¤– Processing: Assumptions (type: text)
ğŸ“ Processing section: Dependencies (type: object)
ğŸ“ Processing section: Dependencies (type: object)
ğŸ¯ Detected content type for Dependencies: text
ğŸ¤– Processing: Dependencies (type: text)
ğŸ“ Processing section: APIs Used (type: object)
ğŸ“ Processing section: APIs Used (type: object)
ğŸ¯ Detected content type for APIs Used: text
ğŸ¤– Processing: APIs Used (type: text)
ğŸ“ Processing section: Test Cases (type: object)
ğŸ“ Processing section: Test Cases (type: object)
ğŸ¯ Detected content type for Test Cases: text
ğŸ¤– Processing: Test Cases (type: text)
ğŸ“ Processing section: Data Flow Diagram (type: object)
ğŸ“ Processing section: Data Flow Diagram (type: object)
ğŸ¯ Detected content type for Data Flow Diagram: graphviz
ğŸ¤– Processing: Data Flow Diagram (type: graphviz)
âœ… Generated 8 content sections (12289 chars total)
ğŸš€ Publishing new page to Confluence...
Payload structure: {
  type: 'page',
  title: 'TS-250526-gndctx-8la2 Shopper Stop ::  - Integration BRD',
  spaceKey: 'BRD',
  hasParent: false,
  contentLength: 14129
}
ğŸ”— Confluence API Request: POST /content
âœ… Confluence API Response: 200 OK
âœ… New Confluence page created successfully
ğŸ”— Page URL: https://raghuvardhan07.atlassian.net/wiki/pages/viewpage.action?pageId=24936514
ğŸ”“ Releasing lock: BRD-ShopperStop-cabc1b50
ğŸ”— Confluence API Request: DELETE /content/24936490
âœ… Confluence API Response: 204 No Content
ğŸ”“ Lock released for: BRD-ShopperStop-cabc1b50

